<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>smeagollib.uploads documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Smeagollib</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>smeagollib</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>smeagollib</span></div></div></li><li class="depth-2 branch"><a href="smeagollib.authenticate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authenticate</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.configuration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>configuration</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.diff2html.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>diff2html</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extensions</span></div></div></li><li class="depth-3 branch"><a href="smeagollib.extensions.geocsv.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>geocsv</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.extensions.mermaid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mermaid</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.extensions.photoswipe.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>photoswipe</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.extensions.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.extensions.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-3"><a href="smeagollib.extensions.vega.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vega</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.finder.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>finder</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.formatting.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>formatting</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.history.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history</span></div></a></li><li class="depth-2"><a href="smeagollib.include.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>include</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.include.indent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>indent</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.include.parse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parse</span></div></a></li><li class="depth-3 branch"><a href="smeagollib.include.resolve.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolve</span></div></a></li><li class="depth-3"><a href="smeagollib.include.resolve-local-file.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolve-local-file</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.layout.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.local-links.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-links</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-3 branch"><a href="smeagollib.routes.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-3"><a href="smeagollib.routes.wiki.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wiki</span></div></a></li><li class="depth-2 branch"><a href="smeagollib.sanity.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>sanity</span></div></a></li><li class="depth-2 branch current"><a href="smeagollib.uploads.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uploads</span></div></a></li><li class="depth-2"><a href="smeagollib.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="smeagollib.uploads.html#var-auto-thumbnail"><div class="inner"><span>auto-thumbnail</span></div></a></li><li class="depth-1"><a href="smeagollib.uploads.html#var-image-file-extns"><div class="inner"><span>image-file-extns</span></div></a></li><li class="depth-1"><a href="smeagollib.uploads.html#var-image.3F"><div class="inner"><span>image?</span></div></a></li><li class="depth-1"><a href="smeagollib.uploads.html#var-read-image"><div class="inner"><span>read-image</span></div></a></li><li class="depth-1"><a href="smeagollib.uploads.html#var-store-upload"><div class="inner"><span>store-upload</span></div></a></li><li class="depth-1"><a href="smeagollib.uploads.html#var-write-image"><div class="inner"><span>write-image</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">smeagollib.uploads</h1><div class="doc"><div class="markdown"><p>Handle file uploads.</p></div></div><div class="public anchor" id="var-auto-thumbnail"><h3>auto-thumbnail</h3><div class="usage"><code>(auto-thumbnail path filename)</code><code>(auto-thumbnail path filename size image)</code></div><div class="doc"><div class="markdown"><p>For each of the thumbnail sizes in the configuration, create a thumbnail for the file with this <code>filename</code> on this <code>path</code>, provided that it is a scalable image and is larger than the size.</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L83">view source</a></div></div><div class="public anchor" id="var-image-file-extns"><h3>image-file-extns</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Extensions of file types we will attempt to thumbnail. GIF is excluded because by default the javax.imageio package can read GIF, PNG, and JPEG images but can only write PNG and JPEG images.</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L40">view source</a></div></div><div class="public anchor" id="var-image.3F"><h3>image?</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>True if the file at this <code>filename</code> appears as though it may be an image</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L77">view source</a></div></div><div class="public anchor" id="var-read-image"><h3>read-image</h3><div class="usage"><code>(read-image source)</code></div><div class="doc"><div class="markdown"><p>Reads a BufferedImage from source, something that can be turned into a file with clojure.java.io/file</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L46">view source</a></div></div><div class="public anchor" id="var-store-upload"><h3>store-upload</h3><div class="usage"><code>(store-upload params path)</code></div><div class="doc"><div class="markdown"><p>Store an upload both to the file system and to the database. The issue with storing an upload is moving it into place. If <code>params</code> are passed as a map, it is expected that this is a map from an HTTP POST operation of a form with type <code>multipart/form-data</code>.</p>
<p>On success, returns the file object uploaded.</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L113">view source</a></div></div><div class="public anchor" id="var-write-image"><h3>write-image</h3><div class="usage"><code>(write-image img dest &amp; {:keys [format quality], :or {format :jpg}})</code></div><div class="doc"><div class="markdown"><p>Writes img, a RenderedImage, to dest, something that can be turned into a file with clojure.java.io/file. Takes the following keys as options: :format - :gif, :jpg, :png or anything supported by ImageIO :quality - for JPEG images, a number between 0 and 100</p></div></div><div class="src-link"><a href="https://github.com/journeyman-cc/smeagollib/blob/master/src/smeagollib/uploads.clj#L52">view source</a></div></div></div></body></html>